<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Story lungs: eXplainable predictions for post operational risks | XAI Stories</title>
  <meta name="description" content="Case studies for eXplainable Artificial Intelligence" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Story lungs: eXplainable predictions for post operational risks | XAI Stories" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/cover.png" />
  <meta property="og:description" content="Case studies for eXplainable Artificial Intelligence" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Story lungs: eXplainable predictions for post operational risks | XAI Stories" />
  
  <meta name="twitter:description" content="Case studies for eXplainable Artificial Intelligence" />
  <meta name="twitter:image" content="images/cover.png" />



<meta name="date" content="2020-06-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="story-meps-healthcare-expenditures-of-individuals.html"/>
<link rel="next" href="heloc-credits.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><h3>XAI Stories</h3> Case studies</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="foreword.html"><a href="foreword.html"><i class="fa fa-check"></i>Foreword</a>
<ul>
<li class="chapter" data-level="0.1" data-path="foreword.html"><a href="foreword.html#why"><i class="fa fa-check"></i><b>0.1</b> Why?</a></li>
<li class="chapter" data-level="0.2" data-path="foreword.html"><a href="foreword.html#what"><i class="fa fa-check"></i><b>0.2</b> What?</a></li>
<li class="chapter" data-level="0.3" data-path="foreword.html"><a href="foreword.html#how"><i class="fa fa-check"></i><b>0.3</b> How?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="story-compas.html"><a href="story-compas.html"><i class="fa fa-check"></i><b>1</b> Story COMPAS: recidivism reloaded</a>
<ul>
<li class="chapter" data-level="1.1" data-path="story-compas.html"><a href="story-compas.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="story-compas.html"><a href="story-compas.html#previous-work"><i class="fa fa-check"></i><b>1.1.1</b> Previous work</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="story-compas.html"><a href="story-compas.html#models"><i class="fa fa-check"></i><b>1.2</b> Models</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="story-compas.html"><a href="story-compas.html#recidivism"><i class="fa fa-check"></i><b>1.2.1</b> Recidivism</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="story-compas.html"><a href="story-compas.html#explanations"><i class="fa fa-check"></i><b>1.3</b> Explanations</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="story-compas.html"><a href="story-compas.html#model-specific"><i class="fa fa-check"></i><b>1.3.1</b> Model specific</a></li>
<li class="chapter" data-level="1.3.2" data-path="story-compas.html"><a href="story-compas.html#instance-specific"><i class="fa fa-check"></i><b>1.3.2</b> Instance specific</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="story-compas.html"><a href="story-compas.html#summary-and-conclusions"><i class="fa fa-check"></i><b>1.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html"><i class="fa fa-check"></i><b>2</b> Story House Sale Prices: eXplainable predictions for house sale</a>
<ul>
<li class="chapter" data-level="" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#take-away-messages"><i class="fa fa-check"></i>Take-away messages</a></li>
<li class="chapter" data-level="2.1" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#introduction-1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#data"><i class="fa fa-check"></i><b>2.2</b> Data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#data-preperation"><i class="fa fa-check"></i><b>2.2.1</b> Data preperation</a></li>
<li class="chapter" data-level="2.2.2" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#external-data"><i class="fa fa-check"></i><b>2.2.2</b> External data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#model"><i class="fa fa-check"></i><b>2.3</b> Model</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#linear-models"><i class="fa fa-check"></i><b>2.3.1</b> Linear models</a></li>
<li class="chapter" data-level="2.3.2" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#linear-models-assessment"><i class="fa fa-check"></i><b>2.3.2</b> Linear models assessment</a></li>
<li class="chapter" data-level="2.3.3" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#machine-learning-models"><i class="fa fa-check"></i><b>2.3.3</b> Machine Learning models</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#explanations-1"><i class="fa fa-check"></i><b>2.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#xai-for-geographical-location"><i class="fa fa-check"></i><b>2.4.1</b> XAI for geographical location</a></li>
<li class="chapter" data-level="2.4.2" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#feature-importance"><i class="fa fa-check"></i><b>2.4.2</b> Feature importance</a></li>
<li class="chapter" data-level="2.4.3" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#partial-dependence-plots-pdp"><i class="fa fa-check"></i><b>2.4.3</b> Partial Dependence Plots (PDP)</a></li>
<li class="chapter" data-level="2.4.4" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#new-possibilities-with-pdp"><i class="fa fa-check"></i><b>2.4.4</b> New possibilities with PDP</a></li>
<li class="chapter" data-level="2.4.5" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#instance-level-explanations."><i class="fa fa-check"></i><b>2.4.5</b> Instance level explanations.</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#use-case-of-the-model"><i class="fa fa-check"></i><b>2.5</b> Use case of the model</a></li>
<li class="chapter" data-level="2.6" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#summary-and-conclusions-1"><i class="fa fa-check"></i><b>2.6</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html"><i class="fa fa-check"></i><b>3</b> Story hotel booking: eXplainable predictions of booking cancellation and guests coming back</a>
<ul>
<li class="chapter" data-level="3.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#booking-cancellation"><i class="fa fa-check"></i><b>3.2</b> Booking Cancellation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#booking-cancellation-model"><i class="fa fa-check"></i><b>3.2.1</b> Booking Cancellation: Model</a></li>
<li class="chapter" data-level="3.2.2" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#booking-cancellation-explanation-dataset-level"><i class="fa fa-check"></i><b>3.2.2</b> Booking Cancellation: Explanation, dataset level</a></li>
<li class="chapter" data-level="3.2.3" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#booking-cancellation-explanations-instance-level"><i class="fa fa-check"></i><b>3.2.3</b> Booking Cancellation: Explanations, instance level</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#repeated-guests"><i class="fa fa-check"></i><b>3.3</b> Repeated guests</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#repeated-guests-imbalanced-dataset"><i class="fa fa-check"></i><b>3.3.1</b> Repeated guests: Imbalanced dataset</a></li>
<li class="chapter" data-level="3.3.2" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#repeated-guests-model"><i class="fa fa-check"></i><b>3.3.2</b> Repeated guests: Model</a></li>
<li class="chapter" data-level="3.3.3" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#repeated-guests-explanations-instance-level"><i class="fa fa-check"></i><b>3.3.3</b> Repeated guests: Explanations, instance level</a></li>
<li class="chapter" data-level="3.3.4" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#repeated-guests-explanations-dataset-level"><i class="fa fa-check"></i><b>3.3.4</b> Repeated guests: Explanations, dataset level</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#summary-and-conclusions-2"><i class="fa fa-check"></i><b>3.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html"><i class="fa fa-check"></i><b>4</b> Story Uplift Modelling: eXplaining colon cancer survival rate after treatment</a>
<ul>
<li class="chapter" data-level="4.1" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#what-is-uplift-modelling"><i class="fa fa-check"></i><b>4.1.1</b> What is Uplift Modelling?</a></li>
<li class="chapter" data-level="4.1.2" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#dataset-description"><i class="fa fa-check"></i><b>4.1.2</b> Dataset Description</a></li>
<li class="chapter" data-level="4.1.3" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#ideas"><i class="fa fa-check"></i><b>4.1.3</b> Ideas</a></li>
<li class="chapter" data-level="4.1.4" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#why-is-it-worth-the-hassle"><i class="fa fa-check"></i><b>4.1.4</b> Why is it worth the hassle?</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#data-preprocessing"><i class="fa fa-check"></i><b>4.2</b> Data Preprocessing</a></li>
<li class="chapter" data-level="4.3" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#model-1"><i class="fa fa-check"></i><b>4.3</b> Model</a></li>
<li class="chapter" data-level="4.4" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#explanations-2"><i class="fa fa-check"></i><b>4.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#dataset-level-explainations"><i class="fa fa-check"></i><b>4.4.1</b> Dataset Level Explainations</a></li>
<li class="chapter" data-level="4.4.2" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#instance-level-explainations"><i class="fa fa-check"></i><b>4.4.2</b> Instance Level Explainations</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#summary-and-conclusions-3"><i class="fa fa-check"></i><b>4.5</b> Summary and Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html"><i class="fa fa-check"></i><b>5</b> Story Meps: eXplainable predictions for healthcare expenditures</a>
<ul>
<li class="chapter" data-level="5.1" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#model-2"><i class="fa fa-check"></i><b>5.2</b> Model</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#data-1"><i class="fa fa-check"></i><b>5.2.1</b> Data</a></li>
<li class="chapter" data-level="5.2.2" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#model-3"><i class="fa fa-check"></i><b>5.2.2</b> Model</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#explanations-3"><i class="fa fa-check"></i><b>5.3</b> Explanations</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#model-level-explainations"><i class="fa fa-check"></i><b>5.3.1</b> Model Level Explainations</a></li>
<li class="chapter" data-level="5.3.2" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#instance-level-explainations---business-approach"><i class="fa fa-check"></i><b>5.3.2</b> Instance Level Explainations - business approach</a></li>
<li class="chapter" data-level="5.3.3" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#instance-level-explainations---instance-specific-approach"><i class="fa fa-check"></i><b>5.3.3</b> Instance Level Explainations - instance specific approach</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#summary-and-conclusions-4"><i class="fa fa-check"></i><b>5.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html"><i class="fa fa-check"></i><b>6</b> Story MEPS: Healthcare expenditures of individuals</a>
<ul>
<li class="chapter" data-level="6.1" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#todos"><i class="fa fa-check"></i><b>6.1</b> TODOS</a></li>
<li class="chapter" data-level="6.2" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#introduction-5"><i class="fa fa-check"></i><b>6.2</b> Introduction</a></li>
<li class="chapter" data-level="6.3" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#models-1"><i class="fa fa-check"></i><b>6.3</b> Models</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#model-1-linear"><i class="fa fa-check"></i><b>6.3.1</b> Model 1: Linear</a></li>
<li class="chapter" data-level="6.3.2" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#model-2-ann"><i class="fa fa-check"></i><b>6.3.2</b> Model 2: ANN</a></li>
<li class="chapter" data-level="6.3.3" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#model-3-xgb"><i class="fa fa-check"></i><b>6.3.3</b> Model 3: XGB</a></li>
<li class="chapter" data-level="6.3.4" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#results"><i class="fa fa-check"></i><b>6.3.4</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#explanations-4"><i class="fa fa-check"></i><b>6.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#instance-level"><i class="fa fa-check"></i><b>6.4.1</b> Instance level</a></li>
<li class="chapter" data-level="6.4.2" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#dataset-level"><i class="fa fa-check"></i><b>6.4.2</b> Dataset level</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#summary-and-conclusions-5"><i class="fa fa-check"></i><b>6.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="story-lungs.html"><a href="story-lungs.html"><i class="fa fa-check"></i><b>7</b> Story lungs: eXplainable predictions for post operational risks</a>
<ul>
<li class="chapter" data-level="7.1" data-path="story-lungs.html"><a href="story-lungs.html#introduction-6"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="story-lungs.html"><a href="story-lungs.html#model-4"><i class="fa fa-check"></i><b>7.2</b> Model</a></li>
<li class="chapter" data-level="7.3" data-path="story-lungs.html"><a href="story-lungs.html#explanations-5"><i class="fa fa-check"></i><b>7.3</b> Explanations</a></li>
<li class="chapter" data-level="7.4" data-path="story-lungs.html"><a href="story-lungs.html#summary-and-conclusions-6"><i class="fa fa-check"></i><b>7.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="heloc-credits.html"><a href="heloc-credits.html"><i class="fa fa-check"></i><b>8</b> Heloc credits</a>
<ul>
<li class="chapter" data-level="8.1" data-path="heloc-credits.html"><a href="heloc-credits.html#introduction-7"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="heloc-credits.html"><a href="heloc-credits.html#dataset"><i class="fa fa-check"></i><b>8.2</b> Dataset</a></li>
<li class="chapter" data-level="8.3" data-path="heloc-credits.html"><a href="heloc-credits.html#model-5"><i class="fa fa-check"></i><b>8.3</b> Model</a></li>
<li class="chapter" data-level="8.4" data-path="heloc-credits.html"><a href="heloc-credits.html#explanations-6"><i class="fa fa-check"></i><b>8.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="heloc-credits.html"><a href="heloc-credits.html#explanation-for-management"><i class="fa fa-check"></i><b>8.4.1</b> Explanation for management</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="heloc-credits.html"><a href="heloc-credits.html#application-for-clients"><i class="fa fa-check"></i><b>8.5</b> Application for clients</a></li>
<li class="chapter" data-level="8.6" data-path="heloc-credits.html"><a href="heloc-credits.html#summary-and-conclusion"><i class="fa fa-check"></i><b>8.6</b> Summary and conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html"><i class="fa fa-check"></i><b>9</b> Story: Uplift modeling - eXplainable predictions for optimized marketing campaigns</a></li>
<li class="chapter" data-level="10" data-path="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html"><a href="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html"><i class="fa fa-check"></i><b>10</b> Hotel booking cancellation story: eXplainable predictions for booking cancellation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html"><a href="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html#introduction-9"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html"><a href="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html#problem-specification"><i class="fa fa-check"></i><b>10.2</b> Problem specification</a></li>
<li class="chapter" data-level="10.3" data-path="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html"><a href="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html#target-leak-detection"><i class="fa fa-check"></i><b>10.3</b> Target leak detection</a></li>
<li class="chapter" data-level="10.4" data-path="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html"><a href="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html#bias-correction"><i class="fa fa-check"></i><b>10.4</b> Bias correction</a></li>
<li class="chapter" data-level="10.5" data-path="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html"><a href="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html#offering-different-conditions"><i class="fa fa-check"></i><b>10.5</b> Offering different conditions</a></li>
<li class="chapter" data-level="10.6" data-path="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html"><a href="hotel-booking-cancellation-story-explainable-predictions-for-booking-cancellation.html#conclusions-1"><i class="fa fa-check"></i><b>10.6</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i>Examples</a></li>
<li class="chapter" data-level="11" data-path="story-covid19.html"><a href="story-covid19.html"><i class="fa fa-check"></i><b>11</b> Story covid19: eXplainable predictions for mortality</a>
<ul>
<li class="chapter" data-level="11.1" data-path="story-covid19.html"><a href="story-covid19.html#figures-and-citations"><i class="fa fa-check"></i><b>11.1</b> Figures and citations</a></li>
<li class="chapter" data-level="11.2" data-path="story-covid19.html"><a href="story-covid19.html#introduction-10"><i class="fa fa-check"></i><b>11.2</b> Introduction</a></li>
<li class="chapter" data-level="11.3" data-path="story-covid19.html"><a href="story-covid19.html#model-7"><i class="fa fa-check"></i><b>11.3</b> Model</a></li>
<li class="chapter" data-level="11.4" data-path="story-covid19.html"><a href="story-covid19.html#explanations-8"><i class="fa fa-check"></i><b>11.4</b> Explanations</a></li>
<li class="chapter" data-level="11.5" data-path="story-covid19.html"><a href="story-covid19.html#summary-and-conclusions-7"><i class="fa fa-check"></i><b>11.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html"><i class="fa fa-check"></i><b>12</b> Story COMPAS: recidivism reloaded</a>
<ul>
<li class="chapter" data-level="12.1" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#introduction-11"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#model-8"><i class="fa fa-check"></i><b>12.2</b> Model</a></li>
<li class="chapter" data-level="12.3" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#explanations-9"><i class="fa fa-check"></i><b>12.3</b> Explanations</a></li>
<li class="chapter" data-level="12.4" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#summary-and-conclusions-8"><i class="fa fa-check"></i><b>12.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">XAI Stories</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="story-lungs" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Story lungs: eXplainable predictions for post operational risks</h1>
<p><em>Authors: Maciej Bartczak (UW), Marika Partyka (PW)</em></p>
<p><em>Mentors: Aleksandra Radziwiłł (McKinsey &amp; Company), Maciej Krasowski (McKinsey &amp; Company)</em></p>
<div id="introduction-6" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Introduction</h2>
<p>Science allows us to understand the world better. New technologies, data collection solves the problems not only of large companies but also of ordinary people. Especially if human life is at stake.
They say that cancer is the killer of the 21st century. That’s why even small attempts to subdue this problem are important.
In our work, we deal with lung cancer. We try to predict the chances of survival of a patient who has had a tumor removal surgery. We try different approaches.</p>
</div>
<div id="model-4" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Model</h2>
<p>The dataset consists of the following varaibles.</p>
<p>Numerical</p>
<table>
<thead>
<tr class="header">
<th>Variable</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>date_birth</code></td>
<td>date</td>
</tr>
<tr class="even">
<td><code>date_start_treatment</code></td>
<td>date</td>
</tr>
<tr class="odd">
<td><code>date_surgery</code></td>
<td>date</td>
</tr>
<tr class="even">
<td><code>tumor_size_x</code></td>
<td>cm</td>
</tr>
<tr class="odd">
<td><code>tumor_size_y</code></td>
<td>cm</td>
</tr>
<tr class="even">
<td><code>tumor_size_z</code></td>
<td>cm</td>
</tr>
<tr class="odd">
<td><code>years_smoking</code></td>
<td>years</td>
</tr>
<tr class="even">
<td><code>age</code></td>
<td>years</td>
</tr>
<tr class="odd">
<td><code>time_to_surgery</code></td>
<td>years (“today” - date_surgery)</td>
</tr>
</tbody>
</table>
<p>Categorical</p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Decription</th>
<th align="left">Values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>sex</code></td>
<td align="left">subject sex</td>
<td align="left">male/female</td>
</tr>
<tr class="even">
<td align="left"><code>histopatological_diagnosis</code></td>
<td align="left">type of cancer</td>
<td align="left">Rak płaskonabłonkowy, pleomorficzny, …*</td>
</tr>
<tr class="odd">
<td align="left"><code>symptoms</code></td>
<td align="left">whether symptoms were observed</td>
<td align="left">yes/no</td>
</tr>
<tr class="even">
<td align="left"><code>lung_cancer_in_family</code></td>
<td align="left">whether family member had cancer</td>
<td align="left">yes/no</td>
</tr>
<tr class="odd">
<td align="left"><code>stadium_uicc</code></td>
<td align="left">severity of tumor</td>
<td align="left">IA1, IA2, IA3, IB, IIA, IIB, IIIA, IIIB, IVA, IVB*</td>
</tr>
<tr class="even">
<td align="left"><code>alive</code></td>
<td align="left">whether subject is alive</td>
<td align="left">yes/no (<strong>target variable</strong>)</td>
</tr>
</tbody>
</table>
<p>About 1/3 af values of varaibles annotated with * was missing.</p>
<p>Survivability was registered <code>time_to_surgery</code> years after the procedure, for the majority of the subjects not later than 1 year after the procedure, and at most after 12 years.</p>
<p>We have tried out several models as well as different preprocessing strategies. However, all of the approaches yielded similar results differing no more than 0.01 of cross validation acuracy and 0.01 ROC AUC score. These are the models that were utilized:</p>
<ul>
<li>Logistic regression</li>
<li>Logistic regression with hyperparameters cross validation</li>
<li>Random Forest</li>
<li>XGBoost</li>
<li>Neural Net - 10 hidden neurons</li>
<li>Neural Net - 30 hidden neurons</li>
<li>Neural Net - 2 x 10 hidden neurons</li>
</ul>
<p>As we have indentified higle defendent features as well as observed that tumor sizes disturbed the explaination we have employed following preprocessing strategies:</p>
<ul>
<li>encode and normalize</li>
<li>encode, remove highly dependent features and normalize</li>
<li>encode, introduce tumor volume, discard tumor sizes, remove highly dependent features and normalize</li>
</ul>
<p>Finally we have settled on Neural Net with 10 hidden neurons with following receiver operating curve.</p>
<p><img src="images/07_auc_nn.png" width="600" style="display: block; margin: auto;" /></p>
</div>
<div id="explanations-5" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Explanations</h2>
<p>We are based on 3 methods of explaining models, mainly Ceteris Paribus as well as Shap and Variable Importance.
Of course, it is our goal to understand on what basis our model has found a chance of survival of a given patient. For example, let’s take a patient with the following variable values:
- <code>date_start_treatment</code> 2007-03-01
- <code>sex</code> M
- <code>histopatological_diagnosis</code> rak niedrobnokomórkowy
- <code>years_smoking</code> 35
- <code>lung_cancer_in_family</code> No
- <code>symptoms</code> No
- <code>stadium_uicc</code> IIIA
- <code>age</code> 54
- <code>time_to_surgery</code> 0
- <code>volume</code> 125
Our most recent model indicated that the chances of survival after surgery for such a patient are <span class="math inline">\(24\%.\)</span>
Here we have an explanation of this result by SHAP.
<img src="images/07_shap_1.png" width="600" style="display: block; margin: auto;" /></p>
<p>According to our intuition, the lack of symptoms increases the chance of survival, quite advanced stage of UICC equal to IIIA reduces these chances. We may also notice that the prognosis is worse because our patient is a man. However, it will be best if we refer to the results of another method - Ceteris Paribus.
<img src="images/07_cp_1.png" width="600" style="display: block; margin: auto;" />
Here we see 3 variables that show well how a parameter change works for or against the patient. This confirms that women have a better prognosis of survival after surgery, the symptoms of the disease do not herald the best, and also the younger we are, the better we are able to cope with convalescence.
<img src="images/07_cp_2.png" width="600" style="display: block; margin: auto;" /></p>
<p>Here too, the model shows that if our patient’s cancer was classified as much lighter, his chances would increase.</p>
<p>Let’s take a look at another method for the whole data set - Variable Importance.
<img src="images/07_vi_1.png" width="600" style="display: block; margin: auto;" />
The most important one seems to be the variable that says when the patient started treatment. The second most important is the UICC stage. Interestingly, the period of time the patient smoked cigarettes does not affect the outcome too much.</p>
<p>But using model explanations not only helps to explain the result of the prediction, it can also give a hint how to improve our model.</p>
<p>When we built the model on all variables, the explanations allowed us to find correlations. Let’s compare the CeterisParibus results for the full model and the deleted dependent variables.</p>
<p><img src="images/07_cp_3.png" width="600" style="display: block; margin: auto;" />
In the picture above you can see that the influence of two correlated variables was distributed between them, but after leaving only one of these variables, the influence accumulated on it (picture below).</p>
<p><img src="images/07_cp_4.png" width="600" style="display: block; margin: auto;" /></p>
<p>At this stage we can already conclude that the techniques of model explanations are not only useful at the end of our journey. They can give us tips on how to transform data or which variables should be deleted.</p>
</div>
<div id="summary-and-conclusions-6" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Summary and conclusions</h2>
<ul>
<li>XAI methods legitimised employed approach of pruning the dataset.</li>
<li>XAI methods yielded explainations consistent with biological intuintion, what builds up trust in the model.</li>
<li>As variety of modelling and preprocessing approaches resulted in similar predicitive performance we conclude there is not much more to squeeze out of the dataset.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="story-meps-healthcare-expenditures-of-individuals.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="heloc-credits.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/compstat-lmu/iml_methods_limitations/edit/master/07-story-lung.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["book.pdf", "book.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
